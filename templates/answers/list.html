{% extends 'layout.html' %}
{% load static %}
{% load answers %}
{% load likes %}
{% load questions_status %}
{% load i18n %}

{% block title %}{% trans 'Answers' %}{% endblock title %}
{% block beforemain %}
  {{ block.super }}
  {% include '_back_button.html' %}
{% endblock beforemain %}
{% block main %}
  {{ block.super }}

  {% if question %}
    {% include 'questions/_detailed_question.html' %}
  {% endif %}

  <div class="bg-white rounded-2" style="padding: 7px 0;margin-bottom: 3px">
    {% for answer in object_list %}
      <div class="d-flex flex-column bg-white rounded-2 position-relative" style="padding: 7px 0 20px 17px;">

        <div class="d-flex {% if question.status != 'closed' %}position-absolute{% endif %}">
          {% include 'answers/_answer.html' %}
        </div>

        <div style="margin-left: 52px">
          {{ answer.truncated_en_text }}
        </div>

        <div style="margin-left: 52px; margin-top: 17px">
          <a class="text-decoration-none" href="{% url 'answers:detail' pk=answer.id question_id=answer.question_id country_id=answer.question.country_id %}">
            {% trans 'Full answer' %}
          </a>
        </div>

        <div style="margin: 17px 0 0 52px">
          {% include 'likes/_for_answer.html' %}
        </div>
      </div>
    {% endfor %}

    {% if question.author != request.user and question.status == 'published' and question|is_not_answered_by_me:request.user %}
      <a style="display: inline-block; width: 130px; text-align: center; text-decoration: none; line-height: 34px; color: white; border-radius: 5px; background: #2659C2"
         href="{% url 'answers:create' question_id=question.id country_id=question.country_id %}"
      >
        {% trans 'Add new answer' %}
      </a>
    {% endif %}
  </div>
{% endblock main %}
